<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adaptive Career Guidance Test</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --border: #e5e5e5;
            --shadow: rgba(0, 0, 0, 0.1);
            --disabled: #d1d5db;
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --accent: #60a5fa;
            --accent-hover: #3b82f6;
            --border: #3a3a3a;
            --shadow: rgba(0, 0, 0, 0.3);
            --disabled: #4b5563;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-primary);
            transition: all 0.3s ease;
        }

        .container { max-width: 900px; margin: 0 auto; padding: 20px; }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }

        .logo { font-size: 1.3em; font-weight: 600; }

        .controls { display: flex; gap: 10px; }

        .btn-small {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s;
        }

        .btn-small:hover { background: var(--accent); color: white; }
        .active-lang { background: var(--accent); color: white; }

        .info-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--accent);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 1.3em;
            z-index: 100;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .info-btn:hover { transform: scale(1.1); }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active { display: flex; }

        .modal-content {
            background: var(--bg-primary);
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .modal h2 { margin-bottom: 20px; }
        .modal p, .modal ul { color: var(--text-secondary); margin-bottom: 15px; }

        .landing { text-align: center; padding: 100px 20px; }
        .landing h1 { font-size: 3em; margin-bottom: 20px; }
        .landing p {
            font-size: 1.2em;
            color: var(--text-secondary);
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
            border: none;
            padding: 18px 45px;
            border-radius: 12px;
            font-size: 1.15em;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--accent-hover);
            transform: translateY(-2px);
        }

        .btn-primary:disabled {
            background: var(--disabled);
            cursor: not-allowed;
        }

        .btn-secondary {
            background: transparent;
            color: var(--accent);
            border: 2px solid var(--accent);
            padding: 16px 43px;
            border-radius: 12px;
            font-size: 1.15em;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
        }

        .btn-secondary:hover:not(:disabled) {
            background: var(--accent);
            color: white;
        }

        .btn-secondary:disabled {
            border-color: var(--disabled);
            color: var(--disabled);
            cursor: not-allowed;
        }

        .quiz { display: none; }
        .quiz.active { display: block; }

        .progress-text {
            text-align: center;
            color: var(--accent);
            font-weight: 600;
            font-size: 1.1em;
            margin-bottom: 12px;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: var(--bg-secondary);
            border-radius: 10px;
            margin-bottom: 40px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent);
            transition: width 0.4s;
        }

        .question-card {
            background: var(--bg-secondary);
            padding: 45px;
            border-radius: 20px;
            margin-bottom: 35px;
            border: 2px solid var(--border);
        }

        .question-number {
            color: var(--accent);
            font-size: 0.95em;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 35px;
            line-height: 1.5;
        }

        .likert-scale {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .likert-option {
            background: var(--bg-primary);
            border: 2px solid var(--border);
            padding: 20px 28px;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.05em;
        }

        .likert-option:hover {
            border-color: var(--accent);
            background: var(--accent);
            color: white;
            transform: translateX(8px);
        }

        .likert-option.selected {
            border-color: var(--accent);
            background: var(--accent);
            color: white;
        }

        .quiz-nav {
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }

        .results { display: none; }
        .results.active { display: block; }

        .result-card {
            background: var(--bg-secondary);
            padding: 45px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 2px solid var(--accent);
        }

        .result-card h2 {
            color: var(--accent);
            margin-bottom: 20px;
            font-size: 2em;
        }

        .career-match {
            background: var(--bg-primary);
            padding: 28px;
            border-radius: 14px;
            margin: 20px 0;
            border-left: 4px solid var(--accent);
        }

        .career-match h3 { margin-bottom: 12px; }

        .badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            margin: 8px 8px 8px 0;
        }

        .badge-salary { background: #dcfce7; color: #166534; }
        [data-theme="dark"] .badge-salary { background: #14532d; color: #86efac; }
        .badge-growth { background: #fef3c7; color: #92400e; }
        [data-theme="dark"] .badge-growth { background: #713f12; color: #fde047; }

        @media (max-width: 768px) {
            .landing h1 { font-size: 2.2em; }
            .question-card { padding: 30px; }
            .quiz-nav { flex-direction: column; }
        }
    </style>
</head>
<body>
    <button class="info-btn" onclick="openInfo()">‚ÑπÔ∏è</button>

    <div class="modal" id="infoModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeInfo()">√ó</button>
            <h2>Adaptive Career Test</h2>
            <p>This test adapts to your answers! Based on what you say, it asks follow-up questions to understand you better.</p>
            <ul>
                <li><strong>Personalized questions</strong> based on your interests</li>
                <li><strong>Deep-dive follow-ups</strong> when you show strong interest</li>
                <li><strong>Smarter recommendations</strong> from your unique path</li>
            </ul>
        </div>
    </div>

    <div class="modal" id="aboutModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeAbout()">√ó</button>
            <h2>About This Project</h2>
            <p>Unlike static tests, this uses <strong>adaptive branching</strong> - the questions change based on your previous answers.</p>
            <ul>
                <li>Questions adapt to your interests in real-time</li>
                <li>Deeper insights through follow-up questions</li>
                <li>Bilingual support (English & Russian)</li>
            </ul>
        </div>
    </div>

    <div class="container">
        <header>
            <div class="logo">Career Guide</div>
            <div class="controls">
                <button class="btn-small lang-btn active-lang" onclick="changeLang('en')">EN</button>
                <button class="btn-small lang-btn" onclick="changeLang('ru')">RU</button>
                <button class="btn-small" onclick="toggleTheme()">üåô</button>
            </div>
        </header>

        <div class="landing" id="landing">
            <h1>Find Your Perfect Career</h1>
            <p>Take our <strong>adaptive test</strong> that personalizes questions based on YOUR answers for the most accurate career match!</p>
            <div>
                <button class="btn-primary" onclick="startQuiz()">Start Test</button>
                <button class="btn-secondary" onclick="openAbout()">About Project</button>
            </div>
        </div>

        <div class="quiz" id="quiz">
            <div class="progress-text" id="progressText"></div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="question-card">
                <div class="question-number" id="questionNumber"></div>
                <div class="question-text" id="questionText"></div>
                <div class="likert-scale" id="likertScale"></div>
            </div>

            <div class="quiz-nav">
                <button class="btn-secondary" id="prevBtn" onclick="prevQuestion()" disabled>‚Üê <span id="prevText">Previous</span></button>
                <button class="btn-primary" id="nextBtn" onclick="nextQuestion()"><span id="nextText">Next</span> ‚Üí</button>
            </div>
        </div>

        <div class="results" id="results"></div>
    </div>

    <script>
        let lang = 'en';
        let allAnswers = [];
        let questionHistory = [];
        let totalQuestions = 15;

        const translations = {
            en: { prev: "Previous", next: "Next", finish: "See Results", qOf: "Question {n} of ~{total}" },
            ru: { prev: "–ù–∞–∑–∞–¥", next: "–î–∞–ª–µ–µ", finish: "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã", qOf: "–í–æ–ø—Ä–æ—Å {n} –∏–∑ ~{total}" }
        };

        const likert = {
            en: ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"],
            ru: ["–°–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–µ —Å–æ–≥–ª–∞—Å–µ–Ω", "–ù–µ —Å–æ–≥–ª–∞—Å–µ–Ω", "–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ", "–°–æ–≥–ª–∞—Å–µ–Ω", "–ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–µ–Ω"]
        };

        const questionBank = {
            en: {
                // Initial screening questions
                tech_initial: { q: "I enjoy working with computers and technology.", type: "tech", next: "tech_coding" },
                people_initial: { q: "I enjoy helping other people with their problems.", type: "healthcare", next: "healthcare_care" },
                creative_initial: { q: "I prefer tasks where I can use my imagination.", type: "creative", next: "creative_visual" },
                business_initial: { q: "I feel comfortable taking the lead in group projects.", type: "business", next: "business_leadership" },
                
                // Tech follow-ups
                tech_coding: { q: "How interested are you in learning programming and coding?", type: "tech", next: "tech_type" },
                tech_type: { q: "Which area of programming interests you most: web development, data analysis, or game creation?", type: "tech", next: "tech_learning" },
                tech_learning: { q: "Do you prefer learning technical skills on your own or with a mentor/teacher?", type: "tech", next: "tech_problem" },
                tech_problem: { q: "I like figuring out how things work and solving technical problems.", type: "tech" },
                
                // Healthcare follow-ups
                healthcare_care: { q: "Would you like to work directly with patients providing care?", type: "healthcare", next: "healthcare_type" },
                healthcare_type: { q: "Are you more interested in physical health (medicine) or mental health (counseling)?", type: "healthcare", next: "healthcare_empathy" },
                healthcare_empathy: { q: "People often come to me when they need emotional support or advice.", type: "healthcare" },
                
                // Creative follow-ups
                creative_visual: { q: "Are you interested in visual design and creating things people can see?", type: "creative", next: "creative_medium" },
                creative_medium: { q: "Do you prefer digital design (computers) or traditional art (drawing, painting)?", type: "creative", next: "creative_freedom" },
                creative_freedom: { q: "I need creative freedom and flexibility in my work.", type: "creative" },
                
                // Business follow-ups
                business_leadership: { q: "Do you naturally take charge and organize group activities?", type: "business", next: "business_area" },
                business_area: { q: "Which interests you more: marketing/promotion, finance/money management, or starting your own business?", type: "business", next: "business_goals" },
                business_goals: { q: "I'm motivated by achieving goals and seeing measurable results.", type: "business" },
                
                // General questions
                work_style: { q: "I prefer working independently rather than in a team.", type: "neutral" },
                learning_style: { q: "I prefer hands-on learning rather than reading instructions.", type: "neutral" },
                work_pace: { q: "I prefer a fast-paced work environment with variety.", type: "neutral" }
            },
            ru: {
                tech_initial: { q: "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞–º–∏ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏.", type: "tech", next: "tech_coding" },
                people_initial: { q: "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –ø–æ–º–æ–≥–∞—Ç—å –¥—Ä—É–≥–∏–º –ª—é–¥—è–º —Å –∏—Ö –ø—Ä–æ–±–ª–µ–º–∞–º–∏.", type: "healthcare", next: "healthcare_care" },
                creative_initial: { q: "–Ø –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é –∑–∞–¥–∞—á–∏, –≥–¥–µ –º–æ–≥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ.", type: "creative", next: "creative_visual" },
                business_initial: { q: "–ú–Ω–µ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ –±—Ä–∞—Ç—å –ª–∏–¥–µ—Ä—Å—Ç–≤–æ –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.", type: "business", next: "business_leadership" },
                
                tech_coding: { q: "–ù–∞—Å–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –∏–∑—É—á–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–æ–¥–∏–Ω–≥?", type: "tech", next: "tech_type" },
                tech_type: { q: "–ö–∞–∫–∞—è –æ–±–ª–∞—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞: –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä?", type: "tech", next: "tech_learning" },
                tech_learning: { q: "–¢—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å —É—á–∏—Ç—å—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –Ω–∞–≤—ã–∫–∞–º —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∏–ª–∏ —Å –º–µ–Ω—Ç–æ—Ä–æ–º?", type: "tech", next: "tech_problem" },
                tech_problem: { q: "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è, –∫–∞–∫ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏ —Ä–µ—à–∞—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã.", type: "tech" },
                
                healthcare_care: { q: "–¢—ã —Ö–æ—Ç–µ–ª –±—ã —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é —Å –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏?", type: "healthcare", next: "healthcare_type" },
                healthcare_type: { q: "–¢–µ–±—è –±–æ–ª—å—à–µ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ (–º–µ–¥–∏—Ü–∏–Ω–∞) –∏–ª–∏ –º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ (–ø—Å–∏—Ö–æ–ª–æ–≥–∏—è)?", type: "healthcare", next: "healthcare_empathy" },
                healthcare_empathy: { q: "–õ—é–¥–∏ —á–∞—Å—Ç–æ –ø—Ä–∏—Ö–æ–¥—è—Ç –∫–æ –º–Ω–µ –∑–∞ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π.", type: "healthcare" },
                
                creative_visual: { q: "–¢–µ–±—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ª—é–¥–∏ –≤–∏–¥—è—Ç?", type: "creative", next: "creative_medium" },
                creative_medium: { q: "–¢—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å —Ü–∏—Ñ—Ä–æ–≤–æ–π –¥–∏–∑–∞–π–Ω (–∫–æ–º–ø—å—é—Ç–µ—Ä—ã) –∏–ª–∏ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ (—Ä–∏—Å–æ–≤–∞–Ω–∏–µ)?", type: "creative", next: "creative_freedom" },
                creative_freedom: { q: "–ú–Ω–µ –Ω—É–∂–Ω–∞ —Ç–≤–æ—Ä—á–µ—Å–∫–∞—è —Å–≤–æ–±–æ–¥–∞ –∏ –≥–∏–±–∫–æ—Å—Ç—å –≤ —Ä–∞–±–æ—Ç–µ.", type: "creative" },
                
                business_leadership: { q: "–¢—ã –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –±–µ—Ä—ë—à—å –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É –∏ –æ—Ä–≥–∞–Ω–∏–∑—É–µ—à—å –≥—Ä—É–ø–ø–æ–≤—ã–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏?", type: "business", next: "business_area" },
                business_area: { q: "–ß—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ: –º–∞—Ä–∫–µ—Ç–∏–Ω–≥/–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ, —Ñ–∏–Ω–∞–Ω—Å—ã/—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–Ω—å–≥–∞–º–∏ –∏–ª–∏ —Å–≤–æ–π –±–∏–∑–Ω–µ—Å?", type: "business", next: "business_goals" },
                business_goals: { q: "–ú–µ–Ω—è –º–æ—Ç–∏–≤–∏—Ä—É—é—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–µ–π –∏ –≤–∏–¥–∏–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.", type: "business" },
                
                work_style: { q: "–Ø –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é —Ä–∞–±–æ—Ç–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –∞ –Ω–µ –≤ –∫–æ–º–∞–Ω–¥–µ.", type: "neutral" },
                learning_style: { q: "–Ø –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ, –∞ –Ω–µ —á—Ç–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.", type: "neutral" },
                work_pace: { q: "–Ø –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é –±—ã—Å—Ç—Ä—ã–π —Ç–µ–º–ø —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ–º.", type: "neutral" }
            }
        };

        const careers = {
            tech: {
                en: { title: "üñ•Ô∏è Technology Career", desc: "Based on your answers, you show strong interest in technology and problem-solving!", careers: [
                    { name: "Software Developer", salary: "$127,000/year", growth: "26%" },
                    { name: "Data Scientist", salary: "$103,500/year", growth: "35%" }
                ]},
                ru: { title: "üñ•Ô∏è IT-–ö–∞—Ä—å–µ—Ä–∞", desc: "–°—É–¥—è –ø–æ —Ç–≤–æ–∏–º –æ—Ç–≤–µ—Ç–∞–º, —É —Ç–µ–±—è —Å–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å –∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º!", careers: [
                    { name: "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ü–û", salary: "$127,000/–≥–æ–¥", growth: "26%" },
                    { name: "–î–∞—Ç–∞-–°–∞–π–µ–Ω—Ç–∏—Å—Ç", salary: "$103,500/–≥–æ–¥", growth: "35%" }
                ]}
            },
            healthcare: {
                en: { title: "üè• Healthcare Career", desc: "Your answers show you're caring and want to help others!", careers: [
                    { name: "Nurse Practitioner", salary: "$120,680/year", growth: "40%" },
                    { name: "Therapist", salary: "$53,000+/year", growth: "Growing" }
                ]},
                ru: { title: "üè• –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –ö–∞—Ä—å–µ—Ä–∞", desc: "–¢–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ —Ç—ã –∑–∞–±–æ—Ç–ª–∏–≤—ã–π –∏ —Ö–æ—á–µ—à—å –ø–æ–º–æ–≥–∞—Ç—å!", careers: [
                    { name: "–ú–µ–¥—Å–µ—Å—Ç—Ä–∞-–ü—Ä–∞–∫—Ç–∏–∫", salary: "$120,680/–≥–æ–¥", growth: "40%" },
                    { name: "–ü—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç", salary: "$53,000+/–≥–æ–¥", growth: "–†–∞—Å—Ç—ë—Ç" }
                ]}
            },
            creative: {
                en: { title: "üé® Creative Career", desc: "You have a creative mindset and artistic interests!", careers: [
                    { name: "UX/UI Designer", salary: "$85,000/year", growth: "Fast" },
                    { name: "Graphic Designer", salary: "$50,710/year", growth: "Steady" }
                ]},
                ru: { title: "üé® –¢–≤–æ—Ä—á–µ—Å–∫–∞—è –ö–∞—Ä—å–µ—Ä–∞", desc: "–£ —Ç–µ–±—è –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ –∏ —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã!", careers: [
                    { name: "UX/UI –î–∏–∑–∞–π–Ω–µ—Ä", salary: "$85,000/–≥–æ–¥", growth: "–ë—ã—Å—Ç—Ä—ã–π" },
                    { name: "–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –î–∏–∑–∞–π–Ω–µ—Ä", salary: "$50,710/–≥–æ–¥", growth: "–°—Ç–∞–±–∏–ª—å–Ω—ã–π" }
                ]}
            },
            business: {
                en: { title: "üíº Business Career", desc: "You show leadership skills and business thinking!", careers: [
                    { name: "Digital Marketer", salary: "$77,000/year", growth: "High" },
                    { name: "Financial Analyst", salary: "$83,660/year", growth: "9%" }
                ]},
                ru: { title: "üíº –ë–∏–∑–Ω–µ—Å-–ö–∞—Ä—å–µ—Ä–∞", desc: "–¢—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ—à—å –ª–∏–¥–µ—Ä—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –∏ –±–∏–∑–Ω–µ—Å-–º—ã—à–ª–µ–Ω–∏–µ!", careers: [
                    { name: "–¶–∏—Ñ—Ä–æ–≤–æ–π –ú–∞—Ä–∫–µ—Ç–æ–ª–æ–≥", salary: "$77,000/–≥–æ–¥", growth: "–í—ã—Å–æ–∫–∏–π" },
                    { name: "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ê–Ω–∞–ª–∏—Ç–∏–∫", salary: "$83,660/–≥–æ–¥", growth: "9%" }
                ]}
            }
        };

        function openInfo() { document.getElementById('infoModal').classList.add('active'); }
        function closeInfo() { document.getElementById('infoModal').classList.remove('active'); }
        function openAbout() { document.getElementById('aboutModal').classList.add('active'); }
        function closeAbout() { document.getElementById('aboutModal').classList.remove('active'); }

        function changeLang(newLang) {
            lang = newLang;
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active-lang'));
            event.target.classList.add('active-lang');
            document.getElementById('prevText').textContent = translations[lang].prev;
            document.getElementById('nextText').textContent = translations[lang].next;
            if (document.getElementById('quiz').classList.contains('active')) {
                loadQuestion();
            }
        }

        function toggleTheme() {
            const html = document.documentElement;
            const current = html.getAttribute('data-theme');
            html.setAttribute('data-theme', current === 'dark' ? 'light' : 'dark');
            event.target.textContent = current === 'dark' ? 'üåô' : '‚òÄÔ∏è';
        }

        function startQuiz() {
            document.getElementById('landing').style.display = 'none';
            document.getElementById('quiz').classList.add('active');
            allAnswers = [];
            questionHistory = ['tech_initial', 'people_initial', 'creative_initial', 'business_initial'];
            loadQuestion();
        }

        function getNextQuestion() {
            // If we have unanswered questions in history, use those
            if (allAnswers.length < questionHistory.length) {
                return questionHistory[allAnswers.length];
            }

            // Check last answer to determine if we should branch
            if (allAnswers.length > 0) {
                const lastQId = questionHistory[allAnswers.length - 1];
                const lastQ = questionBank[lang][lastQId];
                const lastAnswer = allAnswers[allAnswers.length - 1];

                // If answer was positive (3 or 4) and there's a next question
                if (lastAnswer >= 3 && lastQ.next) {
                    const nextQId = lastQ.next;
                    if (!questionHistory.includes(nextQId)) {
                        questionHistory.push(nextQId);
                        return nextQId;
                    }
                }
            }

            // Add general questions at the end
            const generalQs = ['work_style', 'learning_style', 'work_pace'];
            for (let qId of generalQs) {
                if (!questionHistory.includes(qId)) {
                    questionHistory.push(qId);
                    return qId;
                }
            }

            return null; // Test complete
        }

        function loadQuestion() {
            const qId = getNextQuestion();
            
            if (!qId || allAnswers.length >= totalQuestions) {
                showResults();
                return;
            }

            const q = questionBank[lang][qId];
            const currentIdx = allAnswers.length;

            document.getElementById('progressText').textContent = 
                translations[lang].qOf.replace('{n}', currentIdx + 1).replace('{total}', totalQuestions);
            
            document.getElementById('progressFill').style.width = ((currentIdx + 1) / totalQuestions * 100) + '%';
            document.getElementById('questionNumber').textContent = 
                lang === 'en' ? `Question ${currentIdx + 1}` : `–í–æ–ø—Ä–æ—Å ${currentIdx + 1}`;
            document.getElementById('questionText').textContent = q.q;
            
            const scale = document.getElementById('likertScale');
            scale.innerHTML = '';
            
            likert[lang].forEach((opt, idx) => {
                const div = document.createElement('div');
                div.className = 'likert-option';
                if (allAnswers[currentIdx] === idx) div.classList.add('selected');
                div.textContent = opt;
                div.onclick = () => {
                    allAnswers[currentIdx] = idx;
                    scale.querySelectorAll('.likert-option').forEach(o => o.classList.remove('selected'));
                    div.classList.add('selected');
                };
                scale.appendChild(div);
            });
            
            document.getElementById('prevBtn').disabled = currentIdx === 0;
            
            const isLast = currentIdx >= totalQuestions - 1;
            document.getElementById('nextText').textContent = isLast ? translations[lang].finish : translations[lang].next;
        }

        function prevQuestion() {
            if (allAnswers.length > 0) {
                allAnswers.pop();
                loadQuestion();
            }
        }

        function nextQuestion() {
            const currentIdx = allAnswers.length;
            
            if (allAnswers[currentIdx] === undefined) {
                alert(lang === 'en' ? 'Please select an answer' : '–í—ã–±–µ—Ä–∏ –æ—Ç–≤–µ—Ç');
                return;
            }
            
            if (currentIdx >= totalQuestions - 1) {
                showResults();
            } else {
                loadQuestion();
            }
        }

        function showResults() {
            const scores = { tech: 0, healthcare: 0, creative: 0, business: 0 };
            
            questionHistory.forEach((qId, idx) => {
                if (allAnswers[idx] !== undefined) {
                    const q = questionBank[lang][qId];
                    if (q.type !== 'neutral') {
                        scores[q.type] += (allAnswers[idx] + 1);
                    }
                }
            });
            
            const top = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
            const data = careers[top][lang];
            
            document.getElementById('quiz').classList.remove('active');
            const res = document.getElementById('results');
            res.classList.add('active');
            
            res.innerHTML = `
                <div class="result-card">
                    <h2>${data.title}</h2>
                    <p>${data.desc}</p>
                    <h3>${lang === 'en' ? 'Recommended Careers:' : '–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏:'}</h3>
                    ${data.careers.map(c => `
                        <div class="career-match">
                            <h3>${c.name}</h3>
                            <span class="badge badge-salary">üí∞ ${c.salary}</span>
                            <span class="badge badge-growth">üìà ${c.growth}</span>
                        </div>
                    `).join('')}
                    <button class="btn-primary" onclick="location.reload()" style="margin-top:30px">
                        ${lang === 'en' ? 'Take Test Again' : '–ü—Ä–æ–π—Ç–∏ –°–Ω–æ–≤–∞'}
                    </button>
                </div>
            `;
        }
    </script>
</body>
</html>